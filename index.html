<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Beyondcoin donations">
    <link rel="stylesheet" href="css/style.css">

    <title>Beyondcoin community donations</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.7/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  </head>

  <body>
    <div id="particles-js"></div>
    <div class="container" id="app">
    <br>
      <h1>Donation Progress</h1>
        <div class="progress">
          <div class="progress-bar progress-bar-striped active large-font" role="progressbar" aria-valuenow="0" aria-valuemin="100" aria-valuemax="100" v-bind:style="{ 'width':percentage+'%'}">
            {{ percentage | percent }}%
          </div>
        </div>
      <h5>Donation goal: {{ goalBTC }} BTC / month</h5>
      <h5>Raised: {{ totalBitcoinsRaised | satoshi }} BTC</h5>
      <br>
      <div class="row marketing">
        <div class="col-lg-12">

        <div class="card">
  <h4 class="card-header">Beyondcoin donations</h4>
  <div class="card-body"><p>The Beyondcoin development team partially relies on donations to fund the development and integration for services, exchanges and other third-party applications. In the past we have used community donations for hardware wallet implementations,
    exchange listings, being added to third party wallets, being added to iVendPay and more. A large sum of the required funds have been paid for by the development team and a few large Beyondcoin holders. Receiving more community donations would significantly help Beyondcoin grow and show the cryptocurrency space Beyondcoin's full potential.</p>
    <p class="card-title">We calculate the amount in bitcoin.</p>
    <br>
    <p class="card-text">BTC: {{ bitcoinAddress }}</p>
    <img v-bind:src= "'https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl' + bitcoinAddress" alt="beyondcoin bitcoin donation address">

    <p class="card-text">DOGE: {{ dogecoinAddress }}</p>
    <img v-bind:src= "'https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl' + dogecoinAddress" alt="beyondcoin dogecoin donation address">

    <p class="card-text">LTC: {{ litecoinAddress}}</p>
    <img v-bind:src= "'https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl' + litecoinAddress" alt="beyondcoin litecoin donation address">

    <p class="card-text">ETH: {{ ethereumAddress}}</p>
    <img v-bind:src= "'https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl' + ethereumAddress" alt="beyondcoin ethereum donation address">

    <p class="card-text">BYND: {{ beyondcoinAddress}}</p>
    <img v-bind:src= "'https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl' + beyondcoinAddress" alt="beyondcoin donation address">
    <center><a href="https://beyondcoin.io" class="btn btn-primary" style="margin-top: 5%">Visit the Beyondcoin website</a></center>
  </div>
</div>
<br>

<pre>
  Raised in December: 0.00000000 BTC (0.00%)
</pre>
<!--<br>-->
        </div>
      </div>

      <footer class="footer">
        <p>&copy; Beyondcoin 2019 - 2020</p>
      </footer>

    </div> <!-- /container -->
  </body>
  <script type="text/javascript">

    Vue.filter('percent', function (amount) {
      const amt = Number(amount)
      return amt && amt.toLocaleString(undefined, {maximumFractionDigits:2}) || '0'
    });

    Vue.filter('satoshi', function (amount) {
      const amt = Number(amount)
      return amt && amt.toLocaleString(undefined, {maximumFractionDigits:8}) || '0'
    });

    const app = new Vue({
      el: '#app',
      data() {
        return {
          goalBTC: 0.125,
          totalBitcoinsRaised: 0,
          percentage: 0,
          bitcoinAddress: "3HL9gemfU4PcgioTizn2dTejypvcADGKGe",
          dogecoinAddress: "DBceNjjQzvtxzrfWEJ8FbkanusctrLkK25",
          litecoinAddress: "MJ4tNQJHiipxwomuKtFYhJxUNeT7A5Ji6C",
          ethereumAddress: "0x672476F542967b8Cc4d7165D393D68aDC34606DA",
          beyondcoinAddress: "BRSVbvusH1bXG7sd7t63qdgh66jusHMdJL",
          bitcoinBalance: 0,
          beyondcoinBalance: 0,
          dogecoinBalance: 0,
          litecoinBalance: 0,
          ethereumBalance: 0,
        };
      },
      mounted: function() {
        this.getBitcoinBalance(this.getRaisedFundsInBTC)
      },
      methods: {

        getBitcoinBalance: function(callback) {
          console.log("getting btc balance")

          axios.all([axios.get('https://insight.bitpay.com/api/addr/'+this.bitcoinAddress),
            axios.get('https://byndexplorer.com/ext/getaddress/'+this.beyondcoinAddress),
            axios.get('https://api.blockcypher.com/v1/doge/main/addrs/'+this.dogecoinAddress),
            axios.get('https://insight.litecore.io/api/addr/'+this.litecoinAddress),
            axios.get('https://api.etherscan.io/api?module=account&action=balance&address='+this.ethereumAddress)])
          .then(axios.spread(function (firstResponse, secondResponse, thirdResponse, fourthResponse, fifthResponse) {
            ethereumBalance = fifthResponse.data.result / 1000000000000000000
            callback(firstResponse.data.totalReceived, secondResponse.data.totalReceived, thirdResponse.data.totalReceived, fourthResponse.data.totalReceived, ethereumBalance)
          }))
        },

        getRaisedFundsInBTC: function(bitcoin, beyondcoin, dogecoin, litecoin, ethereum) {
          this.bitcoinBalance = bitcoin
          this.beyondcoinBalance = beyondcoin
          this.dogecoinBalance = dogecoin
          this.litecoinBalance = litecoin
          this.ethereumBalance = ethereum

            axios.get('https://www.worldcoinindex.com/apiservice/ticker?key=TMVEUGZjmAKnIgFg1gmJx7SVk&label=byndbtc-dogebtc-ltcbtc-ethbtc&fiat=btc')
            .then(response => {
              console.log(this.litecoinBalance)
              markets = response.data.Markets
              this.totalBitcoinsRaised = this.bitcoinBalance
              this.totalBitcoinsRaised += markets[0].Price * this.dogecoinBalance
              this.totalBitcoinsRaised += markets[1].Price * this.ethereumBalance
              this.totalBitcoinsRaised += markets[2].Price * this.litecoinBalance
              this.totalBitcoinsRaised += markets[3].Price * this.beyondcoinBalance
              this.percentage = (this.totalBitcoinsRaised / this.goalBTC) * 100
            }).catch(error => {
              console.log(error)
            })
        }
      }
    });
  </script>
</html>
